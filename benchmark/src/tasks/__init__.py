import numpy as np
from src.datasets.breast_cancer import BreastCancerDataset
from src.datasets.digits import DigitsDataset
from src.models.branin import Branin
from src.models.himmelblau import HimmelblauModel
from src.models.mlp import MLPModel
from src.models.svm import SVMModel
from src.tasks.task import Task

TASKS = [
    ###### Branin ########
    Task(
        name="Branin (Blackbox)",
        model=Branin(),
        deterministic=True,
        objectives=["cost"],
        optimization_type="bb",
        n_trials=150,
        walltime_limit=60,
        retrain_after=1,
        max_config_calls=1,
        y_limit=(0, 15),
    ),
    Task(
        name="Branin (HPO)",
        model=Branin(),
        deterministic=True,
        objectives=["cost"],
        optimization_type="hpo",
        n_trials=150,
        walltime_limit=60,
        retrain_after=1,
        max_config_calls=1,
        y_limit=(0, 15),
    ),
    Task(
        name="Branin (HPO, retrain after 8 trials)",
        model=Branin(),
        deterministic=True,
        objectives=["cost"],
        optimization_type="hpo",
        n_trials=150,
        walltime_limit=60,
        retrain_after=8,
        max_config_calls=1,
        y_limit=(0, 15),
    ),
    ######## Himmelblau ########
    Task(
        name="Himmelblau (Blackbox)",
        model=HimmelblauModel(),
        deterministic=True,
        objectives=["cost"],
        optimization_type="bb",
        n_trials=300,
        walltime_limit=60,
        retrain_after=1,
        max_config_calls=1,
        y_limit=(0, 100),
    ),
    Task(
        name="Himmelblau (HPO)",
        model=HimmelblauModel(),
        deterministic=True,
        objectives=["cost"],
        optimization_type="hpo",
        n_trials=300,
        walltime_limit=60,
        retrain_after=1,
        max_config_calls=1,
        y_limit=(0, 100),
    ),
    Task(
        name="Himmelblau (HPO, retrain after 8 trials)",
        model=HimmelblauModel(),
        deterministic=True,
        objectives=["cost"],
        optimization_type="hpo",
        n_trials=300,
        walltime_limit=60,
        retrain_after=8,
        max_config_calls=1,
        y_limit=(0, 100),
    ),
    ######## SVM-Digits ########
    Task(
        name="SVM-Digits",
        model=SVMModel(DigitsDataset()),
        deterministic=False,
        objectives=["1-accuracy"],
        optimization_type="hpo",
        n_trials=500,
        walltime_limit=np.inf,
        use_instances=True,
        retrain_after=1,
        max_config_calls=50,
        y_limit=(0.0, 0.1),
    ),
    Task(
        name="SVM-Digits (HB)",
        model=SVMModel(DigitsDataset()),
        deterministic=False,
        objectives=["1-accuracy"],
        optimization_type="mf",
        n_trials=500,
        walltime_limit=np.inf,
        use_instances=True,
        min_budget=10,
        max_budget=50,
        retrain_after=1,
        incumbent_selection="highest_observed_budget",
        n_seeds=2,
        y_limit=(0.0, 0.1),
    ),
    Task(
        name="SVM-Digits (HB, retrain after 8 trials)",
        model=SVMModel(DigitsDataset()),
        deterministic=False,
        objectives=["1-accuracy"],
        optimization_type="mf",
        n_trials=500,
        walltime_limit=np.inf,
        use_instances=True,
        min_budget=10,
        max_budget=50,
        retrain_after=8,
        incumbent_selection="highest_observed_budget",
        n_seeds=2,
        y_limit=(0.0, 0.1),
    ),
    ######## Multi-Fidelity ########
    Task(
        name="MLP-BreastCancer (HB)",
        model=MLPModel(BreastCancerDataset()),
        deterministic=False,
        objectives=["1-accuracy"],
        optimization_type="mf",
        min_budget=1,
        max_budget=25,
        n_trials=1000,
        walltime_limit=360,
        retrain_after=1,
        n_seeds=1,
        incumbent_selection="highest_budget",
        y_limit=(0.0, 0.4),
    ),
    Task(
        name="MLP-BreastCancer (HB, retrain after 8 trials)",
        model=MLPModel(BreastCancerDataset()),
        deterministic=False,
        objectives=["1-accuracy"],
        optimization_type="mf",
        min_budget=1,
        max_budget=25,
        n_trials=1000,
        walltime_limit=360,
        retrain_after=8,
        n_seeds=1,
        incumbent_selection="highest_budget",
        y_limit=(0.0, 0.4),
    ),
    Task(
        name="MLP-BreastCancer (HB, 8 workers)",
        model=MLPModel(BreastCancerDataset()),
        deterministic=False,
        objectives=["1-accuracy"],
        optimization_type="mf",
        min_budget=1,
        max_budget=25,
        n_trials=1000,
        walltime_limit=360,
        retrain_after=1,
        n_seeds=1,
        incumbent_selection="highest_budget",
        n_workers=8,
        y_limit=(0.0, 0.4),
    ),
]
